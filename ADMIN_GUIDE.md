# LocalBuzz 管理者ガイド

## 目次

1. [はじめに](#はじめに)
2. [ダッシュボード](#ダッシュボード)
3. [アカウント管理](#アカウント管理)
4. [システム管理](#システム管理)
5. [業態管理設定](#業態管理設定)
6. [上位カテゴリ管理](#上位カテゴリ管理)
7. [よくある質問](#よくある質問)

---

## はじめに

LocalBuzz管理者ガイドでは、システム管理者がLocalBuzzプラットフォームを管理・運用するための手順を詳細に説明します。

### 管理者権限（詳細説明）

管理者アカウントでは以下の機能にアクセスできます：

#### 1. ダッシュボード

- **アクセス**: 左側メニューから「ホーム」をクリック
- **機能**: システム全体の統計情報を確認
- **表示内容**: 
  - 総アカウント数
  - アクティブアカウント数
  - 総店舗数
  - 総口コミ数
  - 総アンケート回答数
  - システム使用率

#### 2. アカウント管理

- **アクセス**: 左側メニューから「アカウント管理」をクリック
- **機能**: ユーザーアカウントの作成・編集・削除
- **サブメニュー**:
  - アカウント作成
  - アカウント一覧
  - プラン管理

#### 3. システム管理

- **アクセス**: 左側メニューから「システム管理」をクリック
- **機能**: システム設定、通知設定、API設定
- **サブメニュー**:
  - システム設定
  - 通知設定
  - API設定

#### 4. 業態管理設定

- **アクセス**: 左側メニューから「業態管理設定」をクリック
- **機能**: 業態の設定と管理

#### 5. 上位カテゴリ管理

- **アクセス**: 左側メニューから「上位カテゴリ管理」をクリック
- **機能**: カテゴリの設定と管理

### ログイン手順（詳細版）

#### ステップ1: 管理者ログインページにアクセス

1. ブラウザでLocalBuzzの管理者ログインページにアクセスします
   - 例: `https://app.localbuzz.jp/admin/login`
2. 管理者ログインページが表示されます
   - ページ上部に「LocalBuzz 管理者」ロゴが表示されます
   - 中央に管理者ログインフォームが表示されます

#### ステップ2: 認証情報を入力

1. **メールアドレス入力欄**をクリックします
   - プレースホルダー: `管理者メールアドレスを入力してください`
   - 例: `admin@localbuzz.jp`
2. **パスワード入力欄**をクリックします
   - プレースホルダー: `パスワードを入力してください`
   - パスワードは非表示（●）で入力されます

#### ステップ3: ログイン実行

1. 「ログイン」ボタン（青色、画面中央下部）をクリックします
2. 認証中はボタンが「ログイン中...」と表示され、クリックできなくなります
3. 認証が成功すると、自動的に管理者ダッシュボードページにリダイレクトされます

#### エラー時の対処法

- **「メールアドレスまたはパスワードが正しくありません」**
  - メールアドレスの入力ミスを確認
  - パスワードの大文字・小文字を確認
  - システム管理者に連絡してパスワードリセットを依頼

- **「管理者権限がありません」**
  - 管理者アカウントでログインしているか確認
  - システム管理者に連絡して権限の確認を依頼

---

## ダッシュボード

管理者ダッシュボードでは、システム全体の統計情報を確認できます。ページ上部に「管理者ダッシュボード」というタイトルが表示され、その下に複数の指標カードが並んでいます。

### 表示される情報（詳細説明）

#### 1. 総アカウント数カード

**表示内容:**
- **総アカウント数**: 大きな数字で表示（例: `1,234`）
- **前月比**: 前月との比較（例: `+45` または `-12`）
- **トレンドアイコン**: 上昇（↑緑色）または下降（↓赤色）

**見方:**
- システムに登録されているすべてのアカウント数を表示します
- 前月比がプラスの場合、緑色で表示されます
- 前月比がマイナスの場合、赤色で表示されます

**例:**
```
┌─────────────────────┐
│ 総アカウント数      │
│     1,234          │
│  前月比: +45 ↑     │
└─────────────────────┘
```

#### 2. アクティブアカウント数カード

**表示内容:**
- **アクティブアカウント数**: 大きな数字で表示（例: `1,156`）
- **アクティブ率**: 総アカウント数に対するアクティブアカウント数の割合（例: `93.7%`）
- **前月比**: 前月との比較

**見方:**
- 現在有効なアカウント数を表示します
- アクティブ率が高いほど、システムの利用状況が良好です

#### 3. 総店舗数カード

**表示内容:**
- **総店舗数**: 大きな数字で表示（例: `3,456`）
- **アカウントあたりの平均店舗数**: アカウント1つあたりの平均店舗数（例: `2.8店舗`）
- **前月比**: 前月との比較

**見方:**
- システムに登録されているすべての店舗数を表示します
- アカウントあたりの平均店舗数が多いほど、システムの利用状況が良好です

#### 4. 総口コミ数カード

**表示内容:**
- **総口コミ数**: 大きな数字で表示（例: `12,345`）
- **今月の口コミ数**: 今月1日から現在までの口コミ数（例: `1,234`）
- **前月比**: 前月との比較

**見方:**
- システムに登録されているすべての口コミ数を表示します
- 今月の口コミ数が多いほど、システムの利用状況が良好です

#### 5. 総アンケート回答数カード

**表示内容:**
- **総アンケート回答数**: 大きな数字で表示（例: `45,678`）
- **今月の回答数**: 今月1日から現在までの回答数（例: `4,567`）
- **前月比**: 前月との比較

**見方:**
- システムに登録されているすべてのアンケート回答数を表示します
- 今月の回答数が多いほど、システムの利用状況が良好です

#### 6. システム使用率カード

**表示内容:**
- **CPU使用率**: CPUの使用率（例: `45%`）
- **メモリ使用率**: メモリの使用率（例: `62%`）
- **ディスク使用率**: ディスクの使用率（例: `38%`）

**見方:**
- システムリソースの使用状況を表示します
- 使用率が高い場合（80%以上）、システムのパフォーマンスに影響する可能性があります
- 使用率が非常に高い場合（90%以上）、システム管理者に連絡してください

**例:**
```
┌─────────────────────┐
│ システム使用率      │
│ CPU: 45%            │
│ メモリ: 62%         │
│ ディスク: 38%       │
└─────────────────────┘
```

### 使い方（ステップバイステップ）

#### ステップ1: ダッシュボードにアクセス

1. ログイン後、自動的にダッシュボードが表示されます
2. 左側メニューから「ホーム」をクリックしてもダッシュボードに移動できます

#### ステップ2: 指標カードの確認

1. 画面上部に6つの指標カードが横並び（2行×3列）で表示されます
2. 各カードをクリックすると、詳細ページに移動します
3. カードの色で状態を判断できます：
   - **緑色**: 良好な状態
   - **黄色**: 注意が必要
   - **赤色**: 改善が必要

#### ステップ3: グラフの確認

1. 指標カードの下に「システム使用率」グラフが表示されます
2. グラフの右上の「期間を変更」ボタンをクリックします
3. ドロップダウンから期間を選択します：
   - 過去1時間
   - 過去24時間（デフォルト）
   - 過去7日間
   - 過去30日間
4. 選択した期間のグラフが自動的に更新されます

---

## アカウント管理

アカウント管理では、ユーザーアカウントの作成・編集・削除を行います。

### アカウント作成（詳細手順）

#### ステップ1: アカウント作成ページにアクセス

1. 左側メニューから「アカウント管理」をクリックします
2. サブメニューから「アカウント作成」をクリックします
3. アカウント作成ページが表示されます

#### ステップ2: 基本情報入力

##### メールアドレス

**入力欄の場所:**
- フォームの最上部
- ラベル: 「メールアドレス」
- 必須項目（赤いアスタリスク * が表示）

**入力方法:**
1. 入力欄をクリックします
2. ログイン用メールアドレスを入力します
3. 形式: `example@domain.com`

**入力例:**
- ✅ 正しい例: `store@example.com`, `user123@example.jp`
- ❌ 間違った例: `store@example`（ドメインが不完全）, `store example.com`（@がない）

**注意事項:**
- 既に登録されているメールアドレスは使用できません
- メールアドレスの形式が正しいか、自動的に検証されます

##### パスワード

**入力欄の場所:**
- メールアドレスの下
- ラベル: 「パスワード」
- 必須項目

**入力方法:**
1. 入力欄をクリックします
2. 初期パスワードを入力します
3. パスワード要件:
   - 最小8文字
   - 大文字・小文字・数字を含む
   - 記号を含むことを推奨

**入力例:**
- ✅ 正しい例: `Password123!`, `MyPass2024#`
- ❌ 間違った例: `password`（大文字・数字・記号がない）, `12345678`（大文字・小文字がない）

**注意事項:**
- パスワードは非表示（●）で入力されます
- 「パスワードを表示」アイコンをクリックすると、パスワードを確認できます
- セキュリティのため、強力なパスワードを設定してください

##### 名前

**入力欄の場所:**
- パスワードの下
- ラベル: 「名前」
- 必須項目

**入力方法:**
1. 入力欄をクリックします
2. アカウント名を入力します
3. 最大50文字まで入力できます

**入力例:**
- ✅ 正しい例: `サンプルレストラン`, `株式会社サンプル`
- ❌ 間違った例: `サンプルレストランサンプルレストランサンプルレストラン...`（50文字を超える）

##### プラン選択

**入力欄の場所:**
- 名前の下
- ラベル: 「プラン」
- 必須項目

**入力方法:**
1. ドロップダウンメニューをクリックします
2. プランのリストが表示されます
3. アカウントに割り当てるプランを選択します

**選択可能なプラン:**
- **ベーシックプラン**: 基本機能のみ
  - 店舗数: 最大1店舗
  - アンケート数: 最大5アンケート
  - 口コミ管理: あり
  - 順位計測: なし
  - APIアクセス: なし
- **スタンダードプラン**: 標準機能
  - 店舗数: 最大5店舗
  - アンケート数: 最大20アンケート
  - 口コミ管理: あり
  - 順位計測: あり
  - APIアクセス: あり
- **プレミアムプラン**: 全機能
  - 店舗数: 無制限
  - アンケート数: 無制限
  - 口コミ管理: あり
  - 順位計測: あり
  - APIアクセス: あり

**注意事項:**
- プランを選択すると、プランに応じた機能制限が適用されます
- 後でプランを変更することもできます

#### ステップ3: ステータス設定

**設定場所:**
- プラン選択の下
- ラベル: 「ステータス」
- 必須項目

**設定方法:**
1. ドロップダウンメニューをクリックします
2. ステータスのリストが表示されます
3. アカウントのステータスを選択します

**選択可能なステータス:**
- **有効**: アカウントを有効化（ログイン可能）
- **審査中**: アカウントを審査中に設定（ログイン不可）
- **支払い遅延**: 支払い遅延状態に設定（ログイン不可）
- **停止**: アカウントを停止（ログイン不可）

**注意事項:**
- 新規アカウントは通常「有効」に設定します
- 「審査中」は、アカウントの審査が必要な場合に使用します
- 「支払い遅延」は、支払いが遅れている場合に使用します
- 「停止」は、アカウントを一時的に停止する場合に使用します

#### ステップ4: 店舗設定

**設定場所:**
- ステータス設定の下
- セクションタイトル: 「店舗設定」

##### 店舗追加

1. 「店舗を追加」ボタンをクリックします
2. 店舗追加フォームが表示されます
3. 以下の情報を入力します:
   - **店舗名**: 店舗の正式名称（必須）
   - **電話番号**: 連絡先電話番号（任意）
   - **住所**: 店舗の所在地（任意）
   - **業種**: 店舗の業種カテゴリ（任意）
   - **ステータス**: 有効/停止（必須、デフォルト: 有効）
4. 「保存」ボタンをクリックします
5. 店舗が追加されます

**入力例:**
```
店舗名: サンプルレストラン 新宿店
電話番号: 03-1234-5678
住所: 〒160-0022 東京都新宿区新宿3-1-1
業種: レストラン
ステータス: 有効
```

##### 店舗編集

1. 店舗一覧から編集したい店舗を選択します
2. 「編集」ボタン（鉛筆アイコン）をクリックします
3. 店舗編集フォームが表示されます
4. 内容を編集します
5. 「保存」ボタンをクリックします

##### 店舗削除

1. 店舗一覧から削除したい店舗を選択します
2. 「削除」ボタン（ゴミ箱アイコン）をクリックします
3. 確認ダイアログが表示されます
4. 「削除」をクリックします
5. 店舗が削除されます

**注意事項:**
- 削除した店舗は復元できません
- 店舗に関連するデータ（口コミ、アンケートなど）も削除されます

#### ステップ5: 保存

1. すべての情報を入力後、「保存」ボタン（青色、フォーム下部右側）をクリックします
2. バリデーションチェックが実行されます
3. エラーがある場合、エラーメッセージが表示されます
4. エラーがない場合、アカウントが作成されます
5. 成功メッセージが表示されます（例: `アカウントを作成しました`）

**保存後の動作:**
- アカウントがシステムに登録されます
- アカウント一覧に表示されます
- ユーザーは登録されたメールアドレスとパスワードでログインできます

### アカウント一覧

すべてのアカウントを一覧で確認できます。

#### 表示項目（詳細説明）

- **アカウント名**: アカウントの名前（例: `サンプルレストラン`）
- **メールアドレス**: ログイン用メールアドレス（例: `store@example.com`）
- **プラン**: 割り当てられているプラン（バッジで表示）
  - ベーシックプラン: 青色バッジ
  - スタンダードプラン: 緑色バッジ
  - プレミアムプラン: 金色バッジ
- **ステータス**: アカウントのステータス（バッジで表示）
  - 有効: 緑色バッジ
  - 審査中: 黄色バッジ
  - 支払い遅延: 赤色バッジ
  - 停止: 灰色バッジ
- **店舗数**: 紐づいている店舗数（例: `3店舗`）
- **作成日時**: アカウントの作成日時（例: `2024-01-15 14:30`）
- **最終ログイン**: 最終ログイン日時（例: `2024-01-20 10:15`）
- **操作**: 編集、削除、詳細ボタン

#### フィルタリング（詳細説明）

##### プランでフィルタ

1. アカウント一覧の上部に「プラン」フィルターがあります
2. ドロップダウンメニューをクリックします
3. プランのリストが表示されます:
   - 全て
   - ベーシックプラン
   - スタンダードプラン
   - プレミアムプラン
4. フィルタしたいプランを選択します
5. フィルターが適用され、一覧が更新されます

##### ステータスでフィルタ

1. アカウント一覧の上部に「ステータス」フィルターがあります
2. ドロップダウンメニューをクリックします
3. ステータスのリストが表示されます:
   - 全て
   - 有効
   - 審査中
   - 支払い遅延
   - 停止
4. フィルタしたいステータスを選択します
5. フィルターが適用され、一覧が更新されます

##### 検索

1. アカウント一覧の上部に「検索」入力欄があります
2. 検索キーワードを入力します（例: `サンプル`）
3. アカウント名やメールアドレスで検索されます
4. 検索結果が自動的に更新されます

**検索例:**
- `サンプル`: アカウント名に「サンプル」が含まれるアカウントを検索
- `@example.com`: メールアドレスに「@example.com」が含まれるアカウントを検索

#### 操作（詳細説明）

##### 編集

1. アカウント一覧から編集したいアカウントを選択します
2. 「編集」ボタン（鉛筆アイコン）をクリックします
3. アカウント編集ページに移動します
4. 内容を編集します
5. 「保存」ボタンをクリックします

##### 削除

1. アカウント一覧から削除したいアカウントを選択します
2. 「削除」ボタン（ゴミ箱アイコン）をクリックします
3. 確認ダイアログが表示されます
4. 「削除」をクリックします
5. アカウントが削除されます

**注意事項:**
- 削除したアカウントは復元できません
- アカウントに関連するデータ（店舗、アンケート、口コミなど）も削除されます
- 削除前に必ずバックアップを取得してください

##### 詳細

1. アカウント一覧から詳細を確認したいアカウントを選択します
2. 「詳細」ボタン（情報アイコン）をクリックします
3. アカウント詳細ページに移動します
4. アカウントの詳細情報（店舗一覧、利用状況など）を確認できます

### アカウント編集

既存のアカウント情報を編集します。

#### 編集可能な項目（詳細説明）

##### 基本情報

- **メールアドレス**: ログイン用メールアドレス
  - 変更可能
  - 変更すると、次回ログイン時に新しいメールアドレスが必要になります
- **名前**: アカウント名
  - 変更可能
  - 変更しても、既存のデータには影響しません

##### プラン

- **プラン**: 割り当てられているプラン
  - 変更可能
  - プランを変更すると、プランに応じた機能制限が適用されます
  - 制限を超えるデータがある場合、新規作成ができなくなる可能性があります

**プラン変更の例:**
```
変更前: プレミアムプラン（店舗数: 無制限）
変更後: ベーシックプラン（店舗数: 最大1店舗）

既存の店舗数が1店舗を超える場合:
- 既存の店舗は保持されます
- 新規店舗の作成はできなくなります
```

##### ステータス

- **ステータス**: アカウントのステータス
  - 変更可能
  - ステータスを「停止」にすると、アカウントはログインできなくなります

**ステータス変更の例:**
```
変更前: 有効（ログイン可能）
変更後: 停止（ログイン不可）

ユーザーがログインしようとすると:
- 「アカウントが無効です」というエラーが表示されます
```

##### 店舗

- **店舗**: アカウントに紐づく店舗
  - 追加・編集・削除が可能
  - 店舗を追加する場合、「店舗を追加」ボタンをクリックします
  - 店舗を編集する場合、「編集」ボタンをクリックします
  - 店舗を削除する場合、「削除」ボタンをクリックします

#### 注意事項（詳細説明）

##### メールアドレスの変更

- メールアドレスを変更すると、次回ログイン時に新しいメールアドレスが必要になります
- ユーザーに新しいメールアドレスを通知してください

##### プランの変更

- プランを変更すると、プランに応じた機能制限が適用されます
- 制限を超えるデータがある場合、新規作成ができなくなる可能性があります
- プランを変更する前に、ユーザーに通知することを推奨します

##### ステータスの変更

- ステータスを「停止」にすると、アカウントはログインできなくなります
- ユーザーに通知することを推奨します

### プラン管理

プランの設定と管理を行います。

#### プラン一覧

登録されているプランの一覧を確認できます。

**表示項目:**
- **プラン名**: プランの表示名（例: `ベーシックプラン`）
- **価格**: 月額料金（例: `¥9,800/月`）
- **機能制限**: プランに応じた機能制限
- **登録アカウント数**: このプランに登録されているアカウント数
- **操作**: 編集、削除ボタン

#### プラン設定（詳細説明）

各プランで以下の設定を行います：

##### プラン名

**入力欄の場所:**
- フォームの最上部
- ラベル: 「プラン名」
- 必須項目

**入力方法:**
1. 入力欄をクリックします
2. プランの表示名を入力します
3. 最大50文字まで入力できます

**入力例:**
- ✅ 正しい例: `ベーシックプラン`, `スタンダードプラン`, `プレミアムプラン`
- ❌ 間違った例: `ベーシックプランベーシックプラン...`（50文字を超える）

##### 価格

**入力欄の場所:**
- プラン名の下
- ラベル: 「価格（月額）」
- 必須項目

**入力方法:**
1. 入力欄をクリックします
2. 月額料金を入力します
3. 形式: 数値のみ（例: `9800`）

**入力例:**
- ✅ 正しい例: `9800`, `19800`, `29800`
- ❌ 間違った例: `¥9,800`（記号を含む）, `9,800`（カンマを含む）

**注意事項:**
- 価格は円単位で入力します
- 表示時は自動的に「¥9,800/月」のようにフォーマットされます

##### 機能制限

**設定場所:**
- 価格の下
- セクションタイトル: 「機能制限」

**設定項目:**
1. **店舗数制限**
   - 入力欄をクリックします
   - 最大店舗数を入力します（例: `1`, `5`, `無制限`）
   - 「無制限」を選択する場合、入力欄を空にします

2. **アンケート数制限**
   - 入力欄をクリックします
   - 最大アンケート数を入力します（例: `5`, `20`, `無制限`）

3. **口コミ管理機能**
   - チェックボックスをクリックします
   - チェックを入れると、口コミ管理機能が利用可能になります

4. **順位計測機能**
   - チェックボックスをクリックします
   - チェックを入れると、順位計測機能が利用可能になります

5. **APIアクセス権限**
   - チェックボックスをクリックします
   - チェックを入れると、APIアクセスが可能になります

**設定例:**
```
プラン名: ベーシックプラン
価格: 9800

機能制限:
- 店舗数: 最大1店舗
- アンケート数: 最大5アンケート
- 口コミ管理: ☑ あり
- 順位計測: ☐ なし
- APIアクセス: ☐ なし
```

#### プラン編集

1. プラン一覧から編集したいプランを選択します
2. 「編集」ボタン（鉛筆アイコン）をクリックします
3. プラン編集ページに移動します
4. プラン情報を編集します
5. 「保存」ボタンをクリックします

**注意事項:**
- プラン情報を変更すると、そのプランに登録されているアカウントにも影響します
- 価格を変更する場合、ユーザーに通知することを推奨します

---

## システム管理

システム全体の設定を行います。

### システム設定

システムの基本設定を行います。

#### 一般設定（詳細説明）

##### システム名

**入力欄の場所:**
- フォームの最上部
- ラベル: 「システム名」
- 必須項目

**入力方法:**
1. 入力欄をクリックします
2. システムの表示名を入力します
3. 最大50文字まで入力できます

**入力例:**
- ✅ 正しい例: `LocalBuzz`, `LocalBuzz 管理システム`
- ❌ 間違った例: `LocalBuzzLocalBuzzLocalBuzz...`（50文字を超える）

**注意事項:**
- システム名は、ログインページやダッシュボードに表示されます
- 変更すると、すべてのユーザーに影響します

##### ロゴ

**アップロード場所:**
- システム名の下
- ラベル: 「システムロゴ」

**アップロード方法:**
1. 「画像を追加」ボタンをクリックします
2. ファイル選択ダイアログが表示されます
3. ロゴ画像ファイルを選択します
4. アップロードが完了すると、プレビューが表示されます

**対応ファイル形式:**
- JPEG (.jpg, .jpeg)
- PNG (.png)
- GIF (.gif)
- WebP (.webp)

**推奨サイズ:**
- 幅: 200px以上
- 高さ: 200px以上
- アスペクト比: 1:1（正方形）を推奨

**ファイルサイズ制限:**
- 最大: 2MB

##### メール送信設定

**設定場所:**
- ロゴの下
- ラベル: 「メール送信」

**設定方法:**
1. スイッチをクリックします
2. 「有効」にすると、メール送信が有効になります
3. 「無効」にすると、メール送信が無効になります

**注意事項:**
- メール送信を無効にすると、パスワードリセットなどのメールが送信されません
- メール送信を有効にする場合、メールサーバーの設定が必要です

##### メンテナンスモード

**設定場所:**
- メール送信設定の下
- ラベル: 「メンテナンスモード」

**設定方法:**
1. スイッチをクリックします
2. 「有効」にすると、メンテナンスモードが有効になります
3. 「無効」にすると、メンテナンスモードが無効になります

**注意事項:**
- メンテナンスモードを有効にすると、すべてのユーザーがログインできなくなります
- メンテナンスモード中は、管理者のみログインできます
- メンテナンスモードを有効にする場合、ユーザーに事前に通知することを推奨します

#### セキュリティ設定（詳細説明）

##### パスワードポリシー

**設定場所:**
- 一般設定の下
- セクションタイトル: 「セキュリティ設定」

**設定項目:**
1. **最小文字数**
   - 入力欄をクリックします
   - 最小文字数を入力します（例: `8`）
   - 推奨: 8文字以上

2. **大文字・小文字・数字・記号の必須**
   - チェックボックスをクリックします
   - チェックを入れると、パスワードに大文字・小文字・数字・記号を含める必要があります

3. **パスワード有効期限**
   - 入力欄をクリックします
   - パスワードの有効期限を日数で入力します（例: `90`）
   - 0を入力すると、有効期限なしになります

**設定例:**
```
最小文字数: 8
大文字・小文字・数字・記号の必須: ☑
パスワード有効期限: 90日
```

##### セッション設定

**設定項目:**
1. **セッション有効期限**
   - 入力欄をクリックします
   - セッションの有効期限を時間で入力します（例: `24`）
   - 推奨: 24時間

2. **同時ログイン制限**
   - チェックボックスをクリックします
   - チェックを入れると、同時にログインできるデバイス数を制限できます
   - 制限数を入力します（例: `3`）

**設定例:**
```
セッション有効期限: 24時間
同時ログイン制限: ☑ あり（最大3デバイス）
```

##### 二要素認証

**設定場所:**
- セッション設定の下
- ラベル: 「二要素認証」

**設定方法:**
1. スイッチをクリックします
2. 「有効」にすると、二要素認証が有効になります
3. 「無効」にすると、二要素認証が無効になります

**注意事項:**
- 二要素認証を有効にすると、ログイン時に認証コードの入力が必要になります
- 認証コードは、メールまたはSMSで送信されます
- 二要素認証を有効にする場合、ユーザーに通知することを推奨します

#### 保存

1. 設定を変更したら、「保存」ボタン（青色、フォーム下部右側）をクリックします
2. 設定が保存されます
3. 成功メッセージが表示されます（例: `設定を保存しました`）

**注意事項:**
- 設定を変更すると、すべてのユーザーに影響します
- セキュリティ設定を変更する場合、ユーザーに通知することを推奨します

### 通知設定

システムからの通知設定を行います。

#### 通知タイプ（詳細説明）

##### アカウント作成通知

**設定場所:**
- フォームの最上部
- ラベル: 「アカウント作成通知」

**設定方法:**
1. チェックボックスをクリックします
2. チェックを入れると、新規アカウント作成時に通知が送信されます

**通知内容:**
- アカウント名
- メールアドレス
- 作成日時

##### プラン変更通知

**設定場所:**
- アカウント作成通知の下
- ラベル: 「プラン変更通知」

**設定方法:**
1. チェックボックスをクリックします
2. チェックを入れると、プラン変更時に通知が送信されます

**通知内容:**
- アカウント名
- 変更前のプラン
- 変更後のプラン
- 変更日時

##### 支払い遅延通知

**設定場所:**
- プラン変更通知の下
- ラベル: 「支払い遅延通知」

**設定方法:**
1. チェックボックスをクリックします
2. チェックを入れると、支払い遅延時に通知が送信されます

**通知内容:**
- アカウント名
- 支払い遅延日数
- 遅延日時

##### システムエラー通知

**設定場所:**
- 支払い遅延通知の下
- ラベル: 「システムエラー通知」

**設定方法:**
1. チェックボックスをクリックします
2. チェックを入れると、システムエラー発生時に通知が送信されます

**通知内容:**
- エラーの種類
- エラーの詳細
- 発生日時

#### 通知先設定（詳細説明）

##### メール通知

**設定場所:**
- 通知タイプの下
- セクションタイトル: 「通知先設定」

**設定方法:**
1. 「メール通知」スイッチをクリックします
2. 「有効」にすると、メール通知が有効になります
3. 「無効」にすると、メール通知が無効になります

##### 通知先メールアドレス

**入力欄の場所:**
- メール通知の下
- ラベル: 「通知先メールアドレス」
- 必須項目（メール通知が有効な場合）

**入力方法:**
1. 入力欄をクリックします
2. 通知を送信するメールアドレスを入力します
3. 複数のメールアドレスを入力する場合、カンマで区切ります

**入力例:**
- ✅ 正しい例: `admin@localbuzz.jp`, `admin@localbuzz.jp, support@localbuzz.jp`
- ❌ 間違った例: `admin@localbuzz`（ドメインが不完全）

##### 通知頻度

**設定場所:**
- 通知先メールアドレスの下
- ラベル: 「通知頻度」

**設定方法:**
1. ドロップダウンメニューをクリックします
2. 通知頻度のリストが表示されます
3. 通知頻度を選択します:
   - 即座に送信
   - 1時間ごと
   - 1日ごと（デフォルト）

**注意事項:**
- 「即座に送信」を選択すると、通知が発生した時点で即座に送信されます
- 「1時間ごと」を選択すると、1時間ごとにまとめて送信されます
- 「1日ごと」を選択すると、1日ごとにまとめて送信されます

### API設定

APIアクセスの設定を行います。

#### APIキー管理（詳細説明）

##### APIキー生成

1. 「API設定」ページにアクセスします
2. 「APIキー生成」ボタン（青色）をクリックします
3. 「APIキー名」入力欄に名前を入力します（例: `開発環境用APIキー`）
4. 「生成」ボタンをクリックします
5. APIキーが生成されます
6. APIキーが表示されます（例: `sk_live_1234567890abcdef`）
7. **重要**: APIキーをコピーして、安全な場所に保存してください
8. APIキーは再表示できません

**APIキーの例:**
```
APIキー名: 開発環境用APIキー
APIキー: sk_live_1234567890abcdef
作成日時: 2024-01-15 14:30
```

##### APIキー一覧

生成されたAPIキーの一覧を確認できます。

**表示項目:**
- **APIキー名**: APIキーの名前（例: `開発環境用APIキー`）
- **作成日時**: APIキーの作成日時（例: `2024-01-15 14:30`）
- **最終使用日時**: APIキーの最終使用日時（例: `2024-01-20 10:15`）
- **操作**: 削除ボタン

##### APIキー削除

1. APIキー一覧から削除したいAPIキーを選択します
2. 「削除」ボタン（ゴミ箱アイコン）をクリックします
3. 確認ダイアログが表示されます
4. 「削除」をクリックします
5. APIキーが削除されます

**注意事項:**
- 削除したAPIキーは復元できません
- 削除したAPIキーを使用しているAPI呼び出しはエラーになります
- 削除前に、該当するアプリケーションで新しいAPIキーに切り替えてください

#### アクセス制限（詳細説明）

##### レート制限

**設定場所:**
- APIキー管理の下
- セクションタイトル: 「アクセス制限」

**設定方法:**
1. 「レート制限」入力欄をクリックします
2. API呼び出しのレート制限を入力します（例: `1000`）
3. 「単位」ドロップダウンから単位を選択します:
   - 1分あたり
   - 1時間あたり
   - 1日あたり

**設定例:**
```
レート制限: 1000回/1時間
```

**注意事項:**
- レート制限を超えると、API呼び出しがエラーになります
- レート制限は、APIキーごとに設定できます

##### IP制限

**設定場所:**
- レート制限の下
- ラベル: 「IP制限」

**設定方法:**
1. 「IP制限」スイッチをクリックします
2. 「有効」にすると、IP制限が有効になります
3. 「許可するIPアドレス」入力欄にIPアドレスを入力します
4. 複数のIPアドレスを入力する場合、改行で区切ります

**入力例:**
```
192.168.1.1
192.168.1.2
10.0.0.1
```

**注意事項:**
- IP制限を有効にすると、許可されたIPアドレスからのみAPI呼び出しが可能になります
- IPアドレスの形式が正しいか、自動的に検証されます

##### 認証方式

**設定場所:**
- IP制限の下
- ラベル: 「認証方式」

**設定方法:**
1. ドロップダウンメニューをクリックします
2. 認証方式のリストが表示されます
3. 認証方式を選択します:
   - APIキー（デフォルト）
   - OAuth 2.0

**注意事項:**
- 「APIキー」を選択すると、APIキーによる認証が使用されます
- 「OAuth 2.0」を選択すると、OAuth 2.0による認証が使用されます
- OAuth 2.0を使用する場合、追加の設定が必要です

#### ログ設定（詳細説明）

##### APIログ

**設定場所:**
- アクセス制限の下
- セクションタイトル: 「ログ設定」

**設定方法:**
1. 「APIログ」スイッチをクリックします
2. 「有効」にすると、API呼び出しのログが記録されます
3. 「無効」にすると、APIログが記録されません

**ログに記録される情報:**
- APIキー名
- エンドポイント
- リクエスト内容
- レスポンス内容
- 実行時間
- 日時

##### エラーログ

**設定方法:**
1. 「エラーログ」スイッチをクリックします
2. 「有効」にすると、エラーのログが記録されます
3. 「無効」にすると、エラーログが記録されません

**ログに記録される情報:**
- エラーの種類
- エラーの詳細
- スタックトレース
- 日時

##### ログ保持期間

**設定方法:**
1. 「ログ保持期間」入力欄をクリックします
2. ログの保持期間を日数で入力します（例: `30`）
3. 保持期間を過ぎたログは自動的に削除されます

**設定例:**
```
ログ保持期間: 30日
```

**注意事項:**
- ログ保持期間を長くすると、ディスク容量を多く使用します
- ログ保持期間を短くすると、過去のログを確認できなくなります

---

## 業態管理設定

業態の設定と管理を行います。

### 業態一覧

登録されている業態の一覧を確認できます。

#### 表示項目（詳細説明）

- **業態名**: 業態の名前（例: `レストラン`）
- **説明**: 業態の説明（例: `レストラン業態`）
- **カテゴリ**: 業態のカテゴリ（例: `飲食`）
- **登録店舗数**: この業態に登録されている店舗数（例: `123店舗`）
- **操作**: 編集、削除ボタン

### 業態作成（詳細手順）

#### ステップ1: 基本情報入力

##### 業態名

**入力欄の場所:**
- フォームの最上部
- ラベル: 「業態名」
- 必須項目（赤いアスタリスク * が表示）

**入力方法:**
1. 入力欄をクリックします
2. 業態の名前を入力します
3. 最大50文字まで入力できます

**入力例:**
- ✅ 正しい例: `レストラン`, `カフェ`, `美容院`
- ❌ 間違った例: `レストランレストランレストラン...`（50文字を超える）

##### 説明

**入力欄の場所:**
- 業態名の下
- ラベル: 「説明」
- 任意項目

**入力方法:**
1. テキストエリアをクリックします
2. 業態の説明を入力します
3. 最大500文字まで入力できます

**入力例:**
```
レストラン業態です。
イタリアン、フレンチ、和食など
様々なジャンルのレストランが
この業態に分類されます。
```

##### カテゴリ

**入力欄の場所:**
- 説明の下
- ラベル: 「カテゴリ」
- 必須項目

**入力方法:**
1. ドロップダウンメニューをクリックします
2. カテゴリのリストが表示されます
3. 業態のカテゴリを選択します

**選択可能なカテゴリ例:**
- 飲食
- 美容
- 医療
- 教育
- その他

#### ステップ2: 質問テンプレート設定

**設定場所:**
- カテゴリの下
- セクションタイトル: 「質問テンプレート」

**設定方法:**
1. 「質問を追加」ボタンをクリックします
2. 質問フォームが表示されます
3. 以下の情報を入力します:
   - **質問文**: 質問の内容（必須）
   - **回答形式**: 選択肢、テキスト入力、評価など（必須）
   - **必須/任意**: 必須または任意（必須）
4. 「保存」ボタンをクリックします
5. 質問が追加されます
6. 同様の手順で、複数の質問を追加できます

**質問テンプレートの例:**
```
質問1: 今回の来店はいかがでしたか？
回答形式: 選択肢（単一選択）
選択肢: とても満足、満足、普通、不満、とても不満
必須: はい

質問2: サービスにご満足いただけましたか？
回答形式: 評価（星）
評価: 1〜5
必須: はい

質問3: ご意見・ご要望がございましたら、お聞かせください。
回答形式: テキスト入力
必須: いいえ
```

#### ステップ3: 保存

1. すべての情報を入力後、「保存」ボタン（青色、フォーム下部右側）をクリックします
2. バリデーションチェックが実行されます
3. エラーがある場合、エラーメッセージが表示されます
4. エラーがない場合、業態が作成されます
5. 成功メッセージが表示されます（例: `業態を作成しました`）

### 業態編集

既存の業態情報を編集します。

#### 編集可能な項目（詳細説明）

##### 業態名

- **変更可能**: はい
- **注意事項**: 業態名を変更すると、既存の店舗にも影響する可能性があります

##### 説明

- **変更可能**: はい
- **注意事項**: 説明を変更しても、既存の店舗には影響しません

##### カテゴリ

- **変更可能**: はい
- **注意事項**: カテゴリを変更しても、既存の店舗には影響しません

##### 質問テンプレート

- **変更可能**: はい
- **注意事項**: 質問テンプレートを変更すると、既存のアンケートにも影響する可能性があります

#### 注意事項（詳細説明）

##### 業態名の変更

- 業態名を変更すると、既存の店舗にも影響する可能性があります
- 変更前に、該当する店舗を確認することを推奨します

##### 質問テンプレートの変更

- 質問テンプレートを変更すると、既存のアンケートにも影響する可能性があります
- 変更前に、該当するアンケートを確認することを推奨します

### 業態削除

不要な業態を削除します。

#### 削除前の確認

1. **この業態に登録されている店舗がないか確認**
   - 業態一覧で、登録店舗数を確認します
   - 登録店舗数が0でない場合、削除前に店舗の業態を変更する必要があります

2. **この業態を使用しているアンケートがないか確認**
   - アンケート一覧で、この業態を使用しているアンケートを確認します
   - 該当するアンケートがある場合、削除前にアンケートの業態を変更する必要があります

#### 削除手順

1. 業態一覧から削除したい業態を選択します
2. 「削除」ボタン（ゴミ箱アイコン）をクリックします
3. 確認ダイアログが表示されます
4. 削除前の確認事項を確認します
5. 「削除」をクリックします
6. 業態が削除されます

**注意事項:**
- 削除した業態は復元できません
- 登録店舗数が0でない場合、削除できません
- 削除前に、該当する店舗の業態を変更してください

---

## 上位カテゴリ管理

カテゴリの設定と管理を行います。

### カテゴリ一覧

登録されているカテゴリの一覧を確認できます。

#### 表示項目（詳細説明）

- **カテゴリ名**: カテゴリの名前（例: `飲食`）
- **説明**: カテゴリの説明（例: `飲食関連のカテゴリ`）
- **親カテゴリ**: 親カテゴリ（階層構造の場合、例: `なし`）
- **登録店舗数**: このカテゴリに登録されている店舗数（例: `456店舗`）
- **操作**: 編集、削除ボタン

### カテゴリ作成（詳細手順）

#### ステップ1: 基本情報入力

##### カテゴリ名

**入力欄の場所:**
- フォームの最上部
- ラベル: 「カテゴリ名」
- 必須項目（赤いアスタリスク * が表示）

**入力方法:**
1. 入力欄をクリックします
2. カテゴリの名前を入力します
3. 最大50文字まで入力できます

**入力例:**
- ✅ 正しい例: `飲食`, `美容`, `医療`
- ❌ 間違った例: `飲食飲食飲食...`（50文字を超える）

##### 説明

**入力欄の場所:**
- カテゴリ名の下
- ラベル: 「説明」
- 任意項目

**入力方法:**
1. テキストエリアをクリックします
2. カテゴリの説明を入力します
3. 最大500文字まで入力できます

**入力例:**
```
飲食関連のカテゴリです。
レストラン、カフェ、居酒屋など
様々な飲食店がこのカテゴリに
分類されます。
```

##### 親カテゴリ

**入力欄の場所:**
- 説明の下
- ラベル: 「親カテゴリ」
- 任意項目

**入力方法:**
1. ドロップダウンメニューをクリックします
2. 親カテゴリのリストが表示されます
3. 親カテゴリを選択します（階層構造の場合）
4. 「なし」を選択すると、親カテゴリなしになります

**階層構造の例:**
```
飲食（親カテゴリ）
  ├─ レストラン（子カテゴリ）
  ├─ カフェ（子カテゴリ）
  └─ 居酒屋（子カテゴリ）
```

##### 表示順

**入力欄の場所:**
- 親カテゴリの下
- ラベル: 「表示順」
- 任意項目

**入力方法:**
1. 入力欄をクリックします
2. カテゴリの表示順序を数値で入力します（例: `1`, `2`, `3`）
3. 数値が小さいほど、上に表示されます

**表示順の例:**
```
表示順: 1 → カテゴリA（一番上）
表示順: 2 → カテゴリB（2番目）
表示順: 3 → カテゴリC（3番目）
```

#### ステップ2: 保存

1. すべての情報を入力後、「保存」ボタン（青色、フォーム下部右側）をクリックします
2. バリデーションチェックが実行されます
3. エラーがある場合、エラーメッセージが表示されます
4. エラーがない場合、カテゴリが作成されます
5. 成功メッセージが表示されます（例: `カテゴリを作成しました`）

### カテゴリ編集

既存のカテゴリ情報を編集します。

#### 編集可能な項目（詳細説明）

##### カテゴリ名

- **変更可能**: はい
- **注意事項**: カテゴリ名を変更すると、既存の店舗にも影響する可能性があります

##### 説明

- **変更可能**: はい
- **注意事項**: 説明を変更しても、既存の店舗には影響しません

##### 親カテゴリ

- **変更可能**: はい
- **注意事項**: 親カテゴリを変更すると、階層構造が変更されます

##### 表示順

- **変更可能**: はい
- **注意事項**: 表示順を変更すると、カテゴリの表示順序が変更されます

#### 注意事項（詳細説明）

##### カテゴリ名の変更

- カテゴリ名を変更すると、既存の店舗にも影響する可能性があります
- 変更前に、該当する店舗を確認することを推奨します

##### 親カテゴリの変更

- 親カテゴリを変更すると、階層構造が変更されます
- 変更前に、階層構造の影響を確認することを推奨します

### カテゴリ削除

不要なカテゴリを削除します。

#### 削除前の確認

1. **このカテゴリに登録されている店舗がないか確認**
   - カテゴリ一覧で、登録店舗数を確認します
   - 登録店舗数が0でない場合、削除前に店舗のカテゴリを変更する必要があります

2. **子カテゴリがないか確認**
   - カテゴリ一覧で、このカテゴリを親カテゴリとする子カテゴリを確認します
   - 子カテゴリがある場合、削除前に子カテゴリの親カテゴリを変更する必要があります

#### 削除手順

1. カテゴリ一覧から削除したいカテゴリを選択します
2. 「削除」ボタン（ゴミ箱アイコン）をクリックします
3. 確認ダイアログが表示されます
4. 削除前の確認事項を確認します
5. 「削除」をクリックします
6. カテゴリが削除されます

**注意事項:**
- 削除したカテゴリは復元できません
- 登録店舗数が0でない場合、削除できません
- 子カテゴリがある場合、削除できません
- 削除前に、該当する店舗のカテゴリを変更してください

---

## よくある質問

### Q: アカウントのプランを変更すると、既存のデータはどうなりますか？

**A:** 既存のデータは保持されますが、プランに応じた機能制限が適用されます。制限を超えるデータがある場合、新規作成ができなくなる可能性があります。

**詳細説明:**

1. **データの保持**
   - 既存の店舗、アンケート、口コミなどのデータは保持されます
   - データが削除されることはありません

2. **機能制限の適用**
   - プランを変更すると、プランに応じた機能制限が適用されます
   - 例: プレミアムプランからベーシックプランに変更した場合
     - 既存の店舗は保持されます
     - 新規店舗の作成はできなくなります（店舗数が1店舗を超える場合）

3. **新規作成の制限**
   - 制限を超えるデータがある場合、新規作成ができなくなる可能性があります
   - 例: 店舗数が1店舗を超える場合、新規店舗の作成はできません

**対処法:**
- プランを変更する前に、プランに応じた機能制限を確認してください
- 制限を超えるデータがある場合、データを削除するか、プランを変更しないでください

### Q: アカウントを削除すると、関連するデータはどうなりますか？

**A:** アカウントを削除すると、関連する店舗、アンケート、口コミなどのデータも削除されます。削除前に必ずバックアップを取得してください。

**詳細説明:**

1. **削除されるデータ**
   - アカウント情報
   - 店舗情報
   - アンケート情報
   - 口コミ情報
   - その他の関連データ

2. **削除の実行**
   - アカウントを削除すると、関連するデータも自動的に削除されます
   - 削除されたデータは復元できません

3. **バックアップの取得**
   - 削除前に、必ずバックアップを取得してください
   - バックアップは、CSVエクスポート機能を使用して取得できます

**対処法:**
- アカウントを削除する前に、必ずバックアップを取得してください
- 削除前に、関連するデータを確認してください
- 削除後は、データを復元できません

### Q: システム設定を変更すると、既存のユーザーに影響しますか？

**A:** セキュリティ設定やパスワードポリシーなどの変更は、既存のユーザーにも適用されます。変更前にユーザーに通知することを推奨します。

**詳細説明:**

1. **影響する設定**
   - セキュリティ設定（パスワードポリシー、セッション設定など）
   - メール送信設定
   - メンテナンスモード

2. **影響しない設定**
   - システム名
   - ロゴ

3. **ユーザーへの通知**
   - 変更前に、ユーザーに通知することを推奨します
   - 特に、パスワードポリシーの変更は、ユーザーに大きな影響を与える可能性があります

**対処法:**
- システム設定を変更する前に、ユーザーに通知してください
- 特に、セキュリティ設定を変更する場合は、事前に通知してください
- 変更後は、ユーザーに変更内容を説明してください

### Q: APIキーを削除すると、既存のAPI呼び出しはどうなりますか？

**A:** APIキーを削除すると、そのAPIキーを使用しているAPI呼び出しはエラーになります。削除前に、該当するアプリケーションで新しいAPIキーに切り替えてください。

**詳細説明:**

1. **API呼び出しのエラー**
   - APIキーを削除すると、そのAPIキーを使用しているAPI呼び出しはエラーになります
   - エラーメッセージ: `Invalid API key`

2. **新しいAPIキーへの切り替え**
   - 削除前に、該当するアプリケーションで新しいAPIキーに切り替えてください
   - 新しいAPIキーを生成し、アプリケーションの設定を更新してください

3. **切り替え手順**
   1. 新しいAPIキーを生成します
   2. アプリケーションの設定を更新します
   3. 新しいAPIキーで動作確認します
   4. 古いAPIキーを削除します

**対処法:**
- APIキーを削除する前に、必ず新しいAPIキーに切り替えてください
- 切り替え後は、動作確認を行ってください
- 削除後は、APIキーを復元できません

### Q: 業態やカテゴリを削除すると、既存の店舗に影響しますか？

**A:** 業態やカテゴリを削除すると、その業態やカテゴリに登録されている店舗にも影響します。削除前に、該当する店舗の業態やカテゴリを変更してください。

**詳細説明:**

1. **店舗への影響**
   - 業態やカテゴリを削除すると、その業態やカテゴリに登録されている店舗にも影響します
   - 店舗の業態やカテゴリが「未設定」になる可能性があります

2. **削除の制限**
   - 登録店舗数が0でない場合、削除できません
   - 削除前に、該当する店舗の業態やカテゴリを変更する必要があります

3. **変更手順**
   1. 該当する店舗を確認します
   2. 店舗の業態やカテゴリを変更します
   3. 業態やカテゴリを削除します

**対処法:**
- 業態やカテゴリを削除する前に、該当する店舗を確認してください
- 該当する店舗の業態やカテゴリを変更してください
- 削除後は、業態やカテゴリを復元できません

---

## サポート

問題が解決しない場合は、開発チームまでお問い合わせください。

- **メール**: dev@localbuzz.jp
- **緊急連絡**: 24時間対応の緊急連絡先
- **対応時間**: 通常24時間以内に返信いたします

---

## 付録

### ログの確認方法

システムログは以下の場所で確認できます：

#### アプリケーションログ

- **パス**: `/var/log/localbuzz/app.log`
- **内容**: アプリケーションの実行ログ
- **確認方法**: 
  ```bash
  tail -f /var/log/localbuzz/app.log
  ```

#### エラーログ

- **パス**: `/var/log/localbuzz/error.log`
- **内容**: エラーのログ
- **確認方法**: 
  ```bash
  tail -f /var/log/localbuzz/error.log
  ```

#### APIログ

- **パス**: `/var/log/localbuzz/api.log`
- **内容**: API呼び出しのログ
- **確認方法**: 
  ```bash
  tail -f /var/log/localbuzz/api.log
  ```

### バックアップの取得方法

定期的なバックアップの取得を推奨します：

#### データベースのバックアップ

```bash
# PostgreSQLの場合
pg_dump -U postgres localbuzz > backup_$(date +%Y%m%d).sql

# MySQLの場合
mysqldump -u root -p localbuzz > backup_$(date +%Y%m%d).sql
```

#### ファイルストレージのバックアップ

```bash
# アップロードファイルのバックアップ
tar -czf uploads_backup_$(date +%Y%m%d).tar.gz /var/www/localbuzz/uploads
```

#### 設定ファイルのバックアップ

```bash
# 設定ファイルのバックアップ
tar -czf config_backup_$(date +%Y%m%d).tar.gz /var/www/localbuzz/config
```

### パフォーマンス監視

システムのパフォーマンスを監視するには：

#### ダッシュボードでの確認

1. 管理者ダッシュボードにアクセスします
2. 「システム使用率」カードで、システムリソースの使用状況を確認します
3. 使用率が高い場合（80%以上）、システムのパフォーマンスに影響する可能性があります

#### ログでの確認

1. エラーログを確認します
2. エラーが頻繁に発生している場合、システムのパフォーマンスに影響する可能性があります

#### 監視ツールの使用

外部の監視ツール（例: New Relic、Datadog）を使用して、システムのパフォーマンスを監視できます。
